<html>
    <head>
        <title>astica Javascript Client API: Voice - Transcribe</title>
        <script src="https://www.astica.org/endpoint/ml/javascript/latest/astica.api.js"></script>    
    </head>
    <body>       
        <h1><a href="https://www.astica.org/?fr=vision-analyze"><img src="asset/img/icon.png" id="astica_icon_head"></a>astica Javascript Client API: Voice - Transcribe (Speech to Text)</h1>
        <hr>
        <label for="astica_ML_apikey"><b>Step 1:</b> API Key <a href="https://astica.org/" target="_blank" title="Get API Key" style="font-size:12px; margin-left: 15px;">Obtain your API Key</a></label>
        <input type="text" id="astica_ML_apikey" placeholder="Enter your API Key" value="A0DECC3F-9DBF-45FD-BB29-7645E93A29DE">
     
        <label for="astica_ML_apikey"><b>Step 2:</b> Choose Model Version</label>
        <select id="astica_ML_version" >
            <option value="1.0_full">1.0_full</option>
        </select>
        
        <label for="astica_ML_voice_input"><b>Step 3: Option 1</b> Select a file to transcribe:</label>
        <input type="file" id="astica_ML_voice_input">
        <button onclick="asticaVoice_transcribeFile_test();">Transcribe File</button>
     
        <hr>
        <label for="astica_ML_voice_input"><b>Step 3: Option 2</b> Provide URL to transcribe (.wav):</label>
        <input type="text" id="astica_ML_voice_input_url" placeholder="https://" value="https://www.astica.org/endpoint/ml/inputs/audio/sample_1.wav">
        <button onclick="asticaVoice_transcribeURL_test();">Transcribe URL</button>
     
         <h2 id="astica_ML_vision_output_title" style="display:none;">asticaVoice Output:</h2>
        <textarea id="astica_ML_voice_output" style="display:none;"></textarea>
           
         <script>   
            /*
                Option A: Transcribe file from input
            */
            var asticaTranscribeFile_input = document.getElementById('astica_ML_voice_input');                
            document.addEventListener("DOMContentLoaded", () => {                    
                asticaTranscribeFile_input.addEventListener("change", function () {
                    asticaTranscribeFile = asticaTranscribeFile_input.files[0];
                });
            });
            
            function asticaVoice_transcribeFile_test() {
                if(document.getElementById("astica_ML_apikey").value == '') { 
                    alert("Please provide your astica.org API key");
                    return;
                }               
                asticaAPI_start(document.getElementById("astica_ML_apikey").value); //only needs to be called once. 
                document.getElementById("astica_ML_voice_output").value = '';
                asticaHearing_file(
                    document.getElementById("astica_ML_version").value,
                    asticaTranscribeFile,
                    your_astica_CallBack
                );      

                document.getElementById("astica_ML_vision_output_title").style.display = 'block';                
                document.getElementById("astica_ML_voice_output").style.display = 'block';                
                document.getElementById("astica_ML_voice_output").value = "Loading..";           
            } 
            /*
                Option B: Transcribe from URL
            */
            function asticaVoice_transcribeURL_test() {
                if(document.getElementById("astica_ML_apikey").value == '') { 
                    alert("Please provide your astica.org API key");
                    return;
                }               
                asticaAPI_start(document.getElementById("astica_ML_apikey").value); //only needs to be called once.                   
                document.getElementById("astica_ML_voice_output").value = '';
                asticaHearing_url(
                    document.getElementById("astica_ML_version").value,
                    document.getElementById("astica_ML_voice_input_url").value,
                    your_astica_CallBack
                );      

                document.getElementById("astica_ML_vision_output_title").style.display = 'block';                
                document.getElementById("astica_ML_voice_output").style.display = 'block';                
                document.getElementById("astica_ML_voice_output").value = "Loading..";           
            } 
            function your_astica_CallBack(data) {                  
                console.log('astica callback');        
                if(typeof data.error != 'undefined') { alert(data.error); return; }
                document.getElementById("astica_ML_voice_output").value = data.text;
                console.log(data); //view all data
            }	
        </script>
        
        
        
        <br><br><hr><h2>asticaVision - Voice Transcription Usage:</h2>
        <pre>&lt;script src="<span class="color-lightblue bold">https://www.astica.org/endpoint/ml/javascript/latest/astica.api.js</span>"&gt;&lt;/script&gt;
&lt;script&gt;
    var asticaTranscribeFile_input = document.getElementById('astica_ML_voice_input');                
    document.addEventListener("DOMContentLoaded", () => {                    
        asticaTranscribeFile_input.addEventListener("change", function () {
            asticaTranscribeFile = asticaTranscribeFile_input.files[0];
        });
    });
    function asticaVoice_transcribeFile_test() {
        asticaAPI_start(document.getElementById("astica_ML_apikey").value); //only needs to be called once.   
        asticaHearing_file('1.0_full', asticaTranscribeFile, your_astica_CallBack);                
    } 
    function your_astica_CallBack(data) {  console.log(data); }	//view all data
&lt;/script&gt;
</pre>        
        
        
        <!--- Demo assets; non-API related --->
        <link href="https://fonts.googleapis.com/css?family=Quicksand:400,500,600,700&display=swap" rel="stylesheet">  
        
        <a href="https://www.astica.org/?fr=sample=voice-transcribe"><img src="asset/img/icon.png" id="astica_icon"></a>
        <link href="asset/css/style.css" rel="stylesheet">  
        <link href="asset/js/demo.js" rel="stylesheet">  
    </body>
</html>